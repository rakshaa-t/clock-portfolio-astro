@import url('https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700&family=Geist+Mono:wght@400;500;600&display=swap');

@font-face {
  font-family: 'GeistPixel';
  font-style: normal;
  font-display: swap;
  src: url(/fonts/GeistPixel.ttf) format('truetype');
}


*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --accent:#8B7EC8;
  --accent-glow:rgba(139,126,200,0.35);
  --accent-subtle:rgba(139,126,200,0.08);
  --bg:#E4E0DA;
  --bg-raised:#ECEAE6;
  --bg-inset:#D9D5CF;
  --text-primary:#3A3632;
  --text-secondary:#8A857D;
  --text-muted:#B0AAA2;

  /* Noise textures (inline SVG) */
  --noise-felt:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  --noise-matte:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  --noise-paper:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  --noise-cardstock:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");

  /* Easing tokens (Emil Kowalski principles) */
  --ease:cubic-bezier(0.32,0.72,0,1);
  --ease-spring:cubic-bezier(0.34,1.56,0.64,1);
  --ease-expo:cubic-bezier(0.16,1,0.3,1);

  /* Directional light tokens (top-left overhead) */
  --light-highlight:rgba(255,255,255,0.45);
  --shadow-contact:rgba(0,0,0,0.25);
  --shadow-cast:rgba(0,0,0,0.1);
  --shadow-diffuse:rgba(0,0,0,0.06);

  /* Skeuomorphic shadows */
  --shadow-raised:
    4px 4px 12px rgba(0,0,0,0.1),
    -2px -2px 8px rgba(255,255,255,0.7),
    inset 0 1px 0 rgba(255,255,255,0.6);
  --shadow-inset:
    inset 3px 3px 8px rgba(0,0,0,0.08),
    inset -2px -2px 6px rgba(255,255,255,0.5);
  --shadow-deep:
    8px 8px 24px rgba(0,0,0,0.12),
    -4px -4px 16px rgba(255,255,255,0.6),
    inset 0 1px 0 rgba(255,255,255,0.8),
    inset 0 -1px 0 rgba(0,0,0,0.04);
  /* Object resting on surface — contact + cast */
  --shadow-object:
    0 1px 2px var(--shadow-contact),
    3px 5px 14px var(--shadow-cast);
  --shadow-object-hover:
    0 2px 4px rgba(0,0,0,0.18),
    4px 8px 20px rgba(0,0,0,0.1),
    8px 16px 16px rgba(0,0,0,0.06);
  --shadow-object-pressed:
    0 0.5px 1px var(--shadow-contact),
    1px 2px 6px var(--shadow-cast);

  /* Border-radius tokens */
  --radius-xs:4px;     /* filter pills */
  --radius-sm:8px;     /* tags, icon buttons, tertiary */
  --radius-md:12px;    /* buttons, cards, popovers */
  --radius-full:50%;   /* circular buttons */

  /* Typography scale (4-point grid) */
  --text-h1:32px;      /* section headings */
  --text-h2:28px;      /* page titles */
  --text-h3:24px;      /* modal titles, search */
  --text-h4:20px;      /* mobile headings */
  --text-body:16px;    /* body copy, descriptions, form inputs */
  --text-sm:12px;      /* labels, meta, tags, captions */
  --text-xs:10px;      /* tooltips (grid exception) */
}

html,body{margin:0;padding:0;background:var(--bg);color:var(--text-primary);
  font-family:'Geist',-apple-system,BlinkMacSystemFont,sans-serif;
  -webkit-font-smoothing:antialiased;overflow:auto;height:auto;}
body{}

/* ═══ FOCUS — keyboard-only focus ring ═══ */
:focus-visible{outline:2px solid var(--accent);outline-offset:2px;}
:focus:not(:focus-visible){outline:none;}

/* ═══ MODAL — Marijana-style snap-scroll carousel ═══ */
.modal-overlay{position:fixed;inset:0;z-index:1100;display:flex;align-items:center;justify-content:center;pointer-events:none;opacity:0;transition:opacity 0.2s var(--ease);}
.modal-overlay.open{pointer-events:auto;opacity:1;}
.modal-backdrop{position:absolute;inset:0;background:rgba(58,54,50,0.45);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);}
.modal-card{
  position:relative;width:min(640px,92vw);max-height:min(85vh,800px);
  background:#EDEAE6;
  border-radius:20px;
  box-shadow:0 16px 16px rgba(0,0,0,0.12),0 4px 12px rgba(0,0,0,0.06);
  opacity:0;transform:scale(0.95);
  isolation:isolate;
  transition:opacity 0.2s var(--ease),transform 0.2s var(--ease),box-shadow 0.25s var(--ease);
}
.modal-card-inner{
  border-radius:20px;overflow:hidden;height:min(85vh,800px);
  display:flex;flex-direction:column;position:relative;
  -webkit-mask-image:-webkit-radial-gradient(white,black);
  mask-image:radial-gradient(white,black);
}
.modal-overlay.open .modal-card{opacity:1;transform:scale(1);}
/* Close button — inside carousel area */
.modal-close{
  position:absolute;top:12px;right:12px;width:32px;height:32px;border-radius:var(--radius-full);
  background:rgba(0,0,0,0.25);
  border:none;padding:0;
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;
  font-size:var(--text-sm);line-height:1;color:rgba(255,255,255,0.85);
  opacity:0.45;transition:opacity 0.2s var(--ease),background 0.2s var(--ease),transform 0.2s var(--ease);
}
.modal-card:hover .modal-close{opacity:1;}
.modal-close:hover{background:rgba(0,0,0,0.4);transform:scale(1.05);}
.modal-close:active{transform:scale(0.97);}
/* Carousel — snap scroll, aspect-ratio driven */
.modal-carousel{
  position:relative;width:100%;flex-shrink:0;
  aspect-ratio:5/4;
  overflow:hidden;background:var(--bg);
}
.carousel-scroll{
  display:flex;height:100%;padding:0;gap:0;
  overflow-x:auto;scroll-snap-type:x mandatory;
  scrollbar-width:none;-webkit-overflow-scrolling:touch;
}
.carousel-scroll::-webkit-scrollbar{display:none;}
.carousel-slide{min-width:100%;height:100%;scroll-snap-align:start;overflow:hidden;flex-shrink:0;}
.carousel-slide-color{
  width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;
  font-size:var(--text-h2);font-weight:600;color:rgba(255,255,255,0.85);
}
.coming-soon-label{font-family:'Geist',sans-serif;font-size:var(--text-body);font-weight:500;color:rgba(255,255,255,0.5);letter-spacing:0.02em;}
.carousel-slide img,.carousel-slide video{
  width:100%;height:100%;object-fit:cover;object-position:center;
  -webkit-user-drag:none;user-select:none;
}
.carousel-counter{
  position:absolute;top:12px;left:12px;
  background:rgba(58,54,50,0.4);color:rgba(255,255,255,0.8);
  padding:4px 10px;border-radius:12px;font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);z-index:5;
}
.carousel-btn{
  position:absolute;top:50%;transform:translateY(-50%);width:32px;height:32px;border-radius:var(--radius-full);
  background:rgba(0,0,0,0.25);
  border:none;
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:5;
  color:rgba(255,255,255,0.85);
  opacity:0.45;transition:opacity 0.2s var(--ease),background 0.2s var(--ease),transform 0.2s var(--ease);
}
.modal-card:hover .carousel-btn:not(:disabled){opacity:1;}
.carousel-btn:hover:not(:disabled){background:rgba(0,0,0,0.4);transform:translateY(-50%) scale(1.05);}
.carousel-btn:active:not(:disabled){transform:translateY(-50%) scale(0.97);}
.carousel-btn:disabled{opacity:0.2!important;cursor:default;pointer-events:none;}
.carousel-btn.prev{left:16px;}.carousel-btn.next{right:16px;}
/* Modal body — text area, bottom half */
.modal-body{padding:20px 24px 24px;flex-shrink:0;overflow-y:auto;min-height:0;}
.modal-meta{margin-bottom:16px;}
.modal-desc-wrap{
  padding-top:16px;
  border-top:1px solid rgba(0,0,0,0.08);
  max-height:200px;overflow-y:auto;
}
/* Scroll fade on description area */
.modal-desc-wrap.has-bottom-fade:not(.has-scroll-fade){
  -webkit-mask-image:linear-gradient(to bottom,#000 0%,#000 calc(100% - 28px),rgba(0,0,0,0.85) calc(100% - 16px),rgba(0,0,0,0.4) calc(100% - 8px),transparent 100%);
  mask-image:linear-gradient(to bottom,#000 0%,#000 calc(100% - 28px),rgba(0,0,0,0.85) calc(100% - 16px),rgba(0,0,0,0.4) calc(100% - 8px),transparent 100%);
}
.modal-desc-wrap.has-scroll-fade:not(.has-bottom-fade){
  -webkit-mask-image:linear-gradient(to bottom,transparent 0%,rgba(0,0,0,0.4) 8px,rgba(0,0,0,0.85) 16px,#000 28px,#000 100%);
  mask-image:linear-gradient(to bottom,transparent 0%,rgba(0,0,0,0.4) 8px,rgba(0,0,0,0.85) 16px,#000 28px,#000 100%);
}
.modal-desc-wrap.has-scroll-fade.has-bottom-fade{
  -webkit-mask-image:linear-gradient(to bottom,transparent 0%,rgba(0,0,0,0.4) 8px,rgba(0,0,0,0.85) 16px,#000 28px,#000 calc(100% - 28px),rgba(0,0,0,0.85) calc(100% - 16px),rgba(0,0,0,0.4) calc(100% - 8px),transparent 100%);
  mask-image:linear-gradient(to bottom,transparent 0%,rgba(0,0,0,0.4) 8px,rgba(0,0,0,0.85) 16px,#000 28px,#000 calc(100% - 28px),rgba(0,0,0,0.85) calc(100% - 16px),rgba(0,0,0,0.4) calc(100% - 8px),transparent 100%);
}
.modal-title{font-family:'GeistPixel',sans-serif;font-size:var(--text-h3);font-weight:400;color:var(--text-primary);letter-spacing:-0.02em;margin-bottom:12px;}
.modal-tags{display:flex;gap:8px;flex-wrap:wrap;}
.modal-tag{
  padding:4px 10px;border-radius:var(--radius-sm);font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;text-transform:uppercase;
  background:rgba(0,0,0,0.04);color:var(--text-secondary);
  border:1px solid rgba(0,0,0,0.06);
}
.modal-tag.link{
  cursor:pointer;color:var(--accent);
  background:var(--accent-subtle);
  text-decoration:none;display:inline-flex;align-items:center;gap:4px;
  transition:background 0.15s var(--ease);
}
.modal-tag.link:hover{background:rgba(139,126,200,0.15);}
.modal-tag.link:active{transform:scale(0.97);}
.modal-desc{font-size:var(--text-body);line-height:1.7;color:var(--text-secondary);}
.modal-desc p{margin-bottom:12px;}
.modal-desc p:last-child{margin-bottom:0;}

/* ═══ PUZZLE GRID (Work) ═══ */
.puzzle-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  max-width:520px;margin-left:auto;margin-right:auto;
  gap:12px;
}
.puzzle-card{
  border-radius:12px;position:relative;overflow:hidden;
  cursor:pointer;aspect-ratio:4/3;
  transition:transform 0.2s cubic-bezier(0.32,0.72,0,1);
  box-shadow:var(--shadow-object);
  background:#f0eee9;
  /* Visible thickness — bottom/right edge */
  border-bottom:2px solid rgba(0,0,0,0.1);
  border-right:1px solid rgba(0,0,0,0.06);
  border-top:1px solid rgba(255,255,255,0.15);
  border-left:1px solid rgba(255,255,255,0.1);
}
/* Specular highlight — glass sheen */
.puzzle-card::after{
  content:'';position:absolute;inset:0;border-radius:12px;
  background:radial-gradient(ellipse at 30% 25%,rgba(255,255,255,0.18) 0%,transparent 55%);
  pointer-events:none;z-index:2;
  transition:opacity 0.2s cubic-bezier(0.32,0.72,0,1);
}
.puzzle-card:hover{
  transform:translateY(-2px) scale(1.01);
}
.puzzle-card:hover::after{opacity:0.7;}
.puzzle-card:active{
  transform:scale(0.97);
}
.puzzle-img{
  width:100%;height:100%;
  transition:transform 0.3s cubic-bezier(0.32,0.72,0,1);
}
.puzzle-card:hover .puzzle-img,.puzzle-card:focus-within .puzzle-img{transform:translateY(-28px);}
.puzzle-extra{display:none;opacity:0;transform:translateY(12px);}
.puzzle-grid.expanded .puzzle-extra{display:block;animation:puzzleReveal 0.3s cubic-bezier(0.32,0.72,0,1) forwards;}
.puzzle-grid.expanded .puzzle-extra:nth-child(8){animation-delay:0s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(9){animation-delay:0.04s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(10){animation-delay:0.08s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(11){animation-delay:0.12s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(12){animation-delay:0.16s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(13){animation-delay:0.2s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(14){animation-delay:0.24s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(15){animation-delay:0.28s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(16){animation-delay:0.32s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(17){animation-delay:0.36s;}
.puzzle-grid.expanded .puzzle-extra:nth-child(18){animation-delay:0.4s;}
@keyframes puzzleReveal{
  to{opacity:1;transform:translateY(0);}
}
.puzzle-grid.collapsing .puzzle-extra{display:none;}
.puzzle-show-more{
  display:block;margin:32px auto 0;
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  letter-spacing:0.01em;text-transform:uppercase;
  padding:8px 20px;border-radius:var(--radius-md);
  background:rgba(0,0,0,0.04);color:rgba(0,0,0,0.45);
  border:none;cursor:pointer;
  transition:background 0.15s cubic-bezier(0.32,0.72,0,1),color 0.15s cubic-bezier(0.32,0.72,0,1);
}
.puzzle-show-more:hover{background:rgba(0,0,0,0.07);color:rgba(0,0,0,0.6);}
.puzzle-show-more:active{transform:scale(0.97);}
.puzzle-show-more.hidden{display:none;}
.puzzle-img img,.puzzle-img video{
  width:100%;height:100%;object-fit:cover;display:block;
}
.puzzle-overlay{
  position:absolute;bottom:0;left:0;right:0;
  display:flex;align-items:center;
  padding:0 12px;height:28px;
  background:rgba(0,0,0,0.04);
  transform:translateY(100%);
  transition:transform 0.3s cubic-bezier(0.32,0.72,0,1);
  z-index:3;
}
.puzzle-card:hover .puzzle-overlay,.puzzle-card:focus-within .puzzle-overlay{transform:translateY(0);}
.puzzle-overlay span{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);font-weight:500;text-align:left;
  color:var(--text-primary);letter-spacing:-0.01em;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}

/* ═══ ABOUT SECTION ═══ */
.about-bio{margin-bottom:32px;text-align:left;max-width:520px;margin-left:auto;margin-right:auto;}
.about-bio p{font-size:var(--text-body);line-height:1.75;color:var(--text-secondary);margin-bottom:16px;}
.about-bio p:first-child{font-size:var(--text-body);color:var(--text-primary);line-height:1.7;}
.about-bio em{font-style:italic;color:var(--text-primary);font-weight:500;}
.about-bio strong{font-weight:600;color:var(--text-primary);}
.about-bio-sub{color:var(--text-secondary);}
.about-drop-trigger{
  color:var(--text-primary);cursor:pointer;position:relative;
  text-decoration:underline;text-underline-offset:2px;text-decoration-color:rgba(0,0,0,0.15);
  transition:text-decoration-color 0.2s cubic-bezier(0.32,0.72,0,1);
}
.about-drop-trigger:hover{text-decoration-color:rgba(0,0,0,0.4);}
.about-drop-wrap{
  position:absolute;left:0;top:calc(100% + 6px);z-index:50;
  min-width:160px;border-radius:10px;
  opacity:0;transform:translateY(-4px);pointer-events:none;
  transition:opacity 0.15s cubic-bezier(0.32,0.72,0,1),transform 0.15s cubic-bezier(0.32,0.72,0,1);
}
.about-drop-wrap.open{opacity:1;transform:translateY(0);pointer-events:auto;}
.about-dropdown{
  padding:8px 0;border-radius:10px;
  max-height:200px;overflow-y:auto;overscroll-behavior:none;-webkit-overflow-scrolling:auto;
  background:var(--text-primary);
  box-shadow:0 4px 16px rgba(0,0,0,0.15);
}
.about-drop-fade{
  position:absolute;bottom:0;left:0;right:0;height:28px;pointer-events:none;
  background:linear-gradient(transparent,var(--text-primary));border-radius:0 0 10px 10px;
  transition:opacity 0.15s cubic-bezier(0.32,0.72,0,1);
}
.about-drop-fade.hidden{opacity:0;}
.about-dropdown-item{
  display:block;padding:6px 14px;
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  color:var(--bg);white-space:nowrap;text-decoration:none;
  transition:opacity 0.15s cubic-bezier(0.32,0.72,0,1);
}
a.about-dropdown-item:hover{opacity:0.7;}
.about-dropdown-item:not(a){opacity:0.85;}
.about-bio-link{color:var(--text-primary);text-decoration:underline;text-underline-offset:2px;text-decoration-color:rgba(0,0,0,0.15);transition:text-decoration-color 0.2s cubic-bezier(0.32,0.72,0,1);}
.about-bio-link:hover{text-decoration-color:rgba(0,0,0,0.4);}
.about-ctas{margin-bottom:32px;max-width:520px;margin-left:auto;margin-right:auto;display:flex;flex-direction:column;align-items:flex-start;gap:16px;}
.about-cta-primary-wrap{display:inline-block;}

/* Primary CTA — keyboard key */
.about-cta-primary{
  display:block;position:relative;padding:16px 40px;border-radius:var(--radius-md);
  border:none;cursor:pointer;text-decoration:none;
  font-family:'Geist',sans-serif;font-size:var(--text-body);font-weight:600;
  letter-spacing:0.03em;color:white;
  background:linear-gradient(180deg,#7E6EBE 0%,#6B5CA8 30%,#6050A0 70%,#5848A0 100%);
  box-shadow:
    0 4px 0 0 #483C88,
    0 8px 14px rgba(72,60,136,0.25);
  text-shadow:0 1px 2px rgba(0,0,0,0.2);
  transform:translateY(0);
  transition:transform 0.08s cubic-bezier(0.32,0.72,0,1),box-shadow 0.08s cubic-bezier(0.32,0.72,0,1);
}
.about-cta-primary:hover{
  background:linear-gradient(180deg,#8A7AC6 0%,#7868B4 30%,#6C5CA8 70%,#6050A0 100%);
  box-shadow:
    0 5px 0 0 #483C88,
    0 10px 16px rgba(72,60,136,0.3);
  transform:translateY(-1px);
}
.about-cta-primary:active{
  background:linear-gradient(180deg,#6050A0 0%,#5848A0 40%,#4E4090 100%);
  box-shadow:
    0 1px 0 0 #483C88,
    0 2px 6px rgba(72,60,136,0.2);
  transform:translateY(3px);
  text-shadow:0 0 1px rgba(0,0,0,0.3);
}

.cta-arrow{display:inline-block;vertical-align:middle;margin-left:6px;margin-top:-1px;}

/* Secondary — 3D circle icon buttons */
.about-cta-strip{display:inline-flex;gap:8px;align-items:center;}
.about-cta{
  width:32px;height:32px;padding:0;border-radius:var(--radius-sm);
  text-decoration:none;color:var(--text-muted);border:none;cursor:pointer;
  display:flex;align-items:center;justify-content:center;position:relative;
  background:
    radial-gradient(ellipse at 35% 25%,rgba(255,255,255,0.7) 0%,rgba(255,255,255,0) 60%),
    linear-gradient(180deg,#F4F1ED 0%,#E2DFDA 100%);
  box-shadow:
    0 2px 0 0 #C4C0BA,
    0 4px 6px rgba(0,0,0,0.06);
  transform:translateY(0);
  transition:transform 0.1s cubic-bezier(0.32,0.72,0,1),box-shadow 0.1s cubic-bezier(0.32,0.72,0,1),color 0.1s cubic-bezier(0.32,0.72,0,1);
}
.about-cta:hover{
  color:var(--accent);
  background:
    radial-gradient(ellipse at 35% 25%,rgba(255,255,255,0.8) 0%,rgba(255,255,255,0) 60%),
    linear-gradient(180deg,#F8F5F1 0%,#E8E5E0 100%);
  box-shadow:
    0 3px 0 0 #C4C0BA,
    0 5px 8px rgba(0,0,0,0.08);
  transform:translateY(-1px);
}
.about-cta:active{
  color:var(--accent);
  background:
    radial-gradient(ellipse at 50% 60%,rgba(255,255,255,0.3) 0%,rgba(255,255,255,0) 50%),
    linear-gradient(180deg,#D5D2CC 0%,#E0DDD8 100%);
  box-shadow:
    0 0 0 0 #C4C0BA,
    inset 0 2px 4px rgba(0,0,0,0.1);
  transform:translateY(2px);
}
.about-cta svg{width:13px;height:13px;flex-shrink:0;}

/* Details */
.about-details{
  border-top:1px solid rgba(0,0,0,0.06);padding-top:24px;text-align:left;
  max-width:520px;margin-left:auto;margin-right:auto;display:flex;flex-direction:column;gap:20px;
}
.about-detail{display:flex;align-items:center;gap:16px;font-size:var(--text-sm);}
.about-detail-label{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.06em;text-transform:uppercase;
  color:var(--text-muted);min-width:80px;flex-shrink:0;
}
.about-detail-value{color:var(--text-secondary);display:flex;align-items:center;gap:8px;}

/* LED indicator */
.led{
  width:7px;height:7px;border-radius:50%;flex-shrink:0;
  background:radial-gradient(circle at 35% 35%,#6BE08A,#34C759);
  box-shadow:0 0 3px rgba(52,199,89,0.5),0 0 7px rgba(52,199,89,0.2);
  animation:ledPulse 2.5s cubic-bezier(0.32,0.72,0,1) infinite;
}
@keyframes ledPulse{
  0%,100%{box-shadow:0 0 3px rgba(52,199,89,0.5),0 0 7px rgba(52,199,89,0.2);}
  50%{box-shadow:0 0 5px rgba(52,199,89,0.7),0 0 12px rgba(52,199,89,0.3);}
}

/* Toggle switch */
.toggle{
  width:30px;height:17px;border-radius:8px;position:relative;cursor:pointer;flex-shrink:0;
  background:linear-gradient(180deg,#DAD7D2 0%,#E2DFDA 100%);
  box-shadow:inset 0 1px 3px rgba(0,0,0,0.12),0 1px 0 rgba(255,255,255,0.5);
  transition:background 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);
  outline:none;
}
.toggle:focus-visible{box-shadow:inset 0 1px 3px rgba(0,0,0,0.12),0 0 0 2px var(--accent);}
.toggle.on{
  background:linear-gradient(180deg,#6050A0 0%,#6B5CA8 100%);
  box-shadow:inset 0 1px 3px rgba(0,0,0,0.15),0 1px 0 rgba(255,255,255,0.5);
}
.toggle-knob{
  position:absolute;top:2px;left:2px;width:13px;height:13px;border-radius:50%;
  background:
    radial-gradient(ellipse at 35% 30%,rgba(255,255,255,0.9) 0%,rgba(255,255,255,0) 60%),
    linear-gradient(180deg,#F8F6F3 0%,#E8E5E0 100%);
  box-shadow:0 1px 3px rgba(0,0,0,0.15),0 1px 1px rgba(0,0,0,0.08);
  transition:transform 0.2s cubic-bezier(0.34,1.56,0.64,1);
}
.toggle.on .toggle-knob{transform:translateX(13px);}

/* Stack cards */
.stack-cards{display:flex;align-items:center;padding:0 0 0 4px;}
.stack-card{
  padding:8px 12px;border-radius:var(--radius-md);
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;text-transform:uppercase;color:var(--text-secondary);
  white-space:nowrap;
  background:linear-gradient(180deg,#F0EDE8 0%,#E8E5E0 100%);
  border:1px solid rgba(255,255,255,0.6);
  box-shadow:0 1px 3px rgba(0,0,0,0.06),0 2px 0 0 #D4D0CA;
  position:relative;margin-left:-18px;cursor:default;
  transition:transform 0.25s cubic-bezier(0.32,0.72,0,1);
}
.stack-card:first-child{margin-left:0;z-index:4;transform:rotate(-2.5deg);}
.stack-card:nth-child(2){z-index:3;transform:rotate(2deg);}
.stack-card:nth-child(3){z-index:2;transform:rotate(-1.5deg);}
.stack-card:nth-child(4){z-index:1;transform:rotate(2.5deg);}
.stack-cards:hover .stack-card,
.stack-cards.touched .stack-card{margin-left:4px;transform:rotate(0deg);}
.stack-cards:hover .stack-card:first-child,
.stack-cards.touched .stack-card:first-child{margin-left:0;}

/* Reduced motion */
@media(prefers-reduced-motion:reduce){
  .led{animation:none;}
  .toggle-knob{transition:none;}
  .stack-card{transition:none;}
}

/* ═══ BROWSE CONTENT ═══ */
.browse-content{
  position:relative;top:0;left:0;width:100%;
  min-height:100vh;padding:80px 0 60px;
  pointer-events:auto;
  background:var(--bg);
  -webkit-overflow-scrolling:touch;
}
.browse-inner{max-width:680px;margin:0 auto;}

/* ═══ SITE FOOTER ═══ */
.site-footer{
  display:flex;align-items:center;justify-content:center;gap:8px;
  padding:40px 24px 48px;
  border-top:1px solid rgba(0,0,0,0.06);
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  letter-spacing:0.1em;text-transform:uppercase;color:var(--text-muted);
}
.footer-sep{opacity:0.4;}
.footer-link{color:var(--text-muted);text-decoration:none;}
.footer-link:hover{text-decoration:underline;color:var(--text-secondary);}

/* ═══ SCROLL REVEAL — staggered fade-in with blur ═══ */
.reveal-item{
  opacity:0;
  filter:blur(4px);
  transform:translateY(10px);
  transition:opacity 0.45s cubic-bezier(0.32,0.72,0,1),
             filter 0.45s cubic-bezier(0.32,0.72,0,1),
             transform 0.45s cubic-bezier(0.32,0.72,0,1);
}
.reveal-item.revealed{
  opacity:1;
  filter:blur(0);
  transform:translateY(0);
}
/* 3D card tilt — subtle perspective rotation on hover (desktop) */
.tilt-card{
  transform-style:preserve-3d;
  transition:transform 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);
}

.browse-section{padding:64px 24px;border-bottom:1px solid rgba(0,0,0,0.04);text-align:left;}
.browse-section:last-child{border-bottom:none;}
.browse-section-label{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:700;
  letter-spacing:0.14em;text-transform:uppercase;color:var(--accent);margin-bottom:8px;
  max-width:520px;margin-left:auto;margin-right:auto;
}
.browse-section h2{font-family:'GeistPixel',sans-serif;font-size:var(--text-h1);font-weight:400;letter-spacing:-0.02em;margin-bottom:8px;line-height:1.2;color:var(--text-primary);max-width:520px;margin-left:auto;margin-right:auto;}
.browse-section .subtitle{font-size:var(--text-body);color:var(--text-secondary);margin-bottom:40px;line-height:1.5;max-width:520px;margin-left:auto;margin-right:auto;}
.timeline-item{padding:24px 0;border-top:1px solid rgba(0,0,0,0.04);display:flex;gap:16px;}
.timeline-year{font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:700;color:var(--accent);min-width:80px;padding-top:2px;flex-shrink:0;letter-spacing:0.02em;}
.timeline-text{font-size:var(--text-body);line-height:1.65;color:var(--text-secondary);}
.timeline-text strong{color:var(--text-primary);font-weight:500;}

/* Rich content */
.term{color:#8B7EC8;cursor:pointer;border-bottom:1px dashed rgba(139,126,200,0.4);transition:border-color 0.15s cubic-bezier(0.32,0.72,0,1);position:relative;}
.term:hover{border-color:#8B7EC8;}
.term:active{opacity:0.7;}
.popover{
  position:fixed;background:#fff;border-radius:var(--radius-md);padding:12px 16px;
  box-shadow:0 4px 20px rgba(0,0,0,0.12),0 1px 4px rgba(0,0,0,0.06);
  border:1px solid rgba(0,0,0,0.06);
  width:220px;pointer-events:none;opacity:0;
  transition:opacity 0.2s cubic-bezier(0.32,0.72,0,1),transform 0.2s cubic-bezier(0.32,0.72,0,1);
  z-index:1050;transform:scale(0.92);
}
.popover.visible{opacity:1;transform:scale(1);pointer-events:auto;}
.popover-title{font-size:var(--text-sm);font-weight:700;color:#1A1A1A;margin-bottom:4px;letter-spacing:0.02em;text-transform:uppercase;}
.popover-desc{font-size:var(--text-sm);color:rgba(0,0,0,0.5);line-height:1.5;}
.note-link{color:#8B7EC8;text-decoration:none;font-weight:500;border-bottom:1px solid rgba(139,126,200,0.25);transition:border-color 0.15s cubic-bezier(0.32,0.72,0,1);}
.note-link:hover{border-color:#8B7EC8;}
.note-link:active{opacity:0.7;}
.note-link::after{content:'';display:inline-block;width:10px;height:10px;margin-left:3px;vertical-align:middle;opacity:0.5;background:currentColor;-webkit-mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M4 12L12 4'/%3E%3Cpath d='M5 4h7v7'/%3E%3C/svg%3E") no-repeat center/contain;mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M4 12L12 4'/%3E%3Cpath d='M5 4h7v7'/%3E%3C/svg%3E") no-repeat center/contain;}
.note-img{width:100%;border-radius:12px;margin:8px 0 4px;box-shadow:0 2px 12px rgba(0,0,0,0.06);overflow:hidden;background:rgba(0,0,0,0.03);}
.note-img img,.note-img canvas{width:100%;display:block;border-radius:12px;}
.note-img-caption{font-size:var(--text-sm);color:rgba(0,0,0,0.3);margin:6px 0 12px;font-style:italic;}
.note-demo{width:100%;border-radius:12px;margin:12px 0;background:linear-gradient(145deg,#F5F3EF,#EDEAE6);border:1px solid rgba(0,0,0,0.05);overflow:hidden;position:relative;}
.note-demo-label{position:absolute;top:8px;right:10px;font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;letter-spacing:0.06em;text-transform:uppercase;color:rgba(0,0,0,0.2);pointer-events:none;}
.note-demo canvas{display:block;width:100%;aspect-ratio:460/140;cursor:grab;}
.note-demo canvas:active{cursor:grabbing;}
.note-demo-hint{text-align:center;padding:6px;font-size:var(--text-sm);color:rgba(0,0,0,0.2);border-top:1px solid rgba(0,0,0,0.04);}
.note-code{background:rgba(0,0,0,0.03);border:1px solid rgba(0,0,0,0.06);border-radius:10px;padding:12px 14px;padding-right:60px;margin:4px 0 0;font-family:'Geist Mono',monospace;font-size:var(--text-sm);line-height:1.7;color:rgba(0,0,0,0.55);overflow-x:auto;word-break:break-all;}
.note-code .kw{color:#7B6BA5;}.note-code .fn{color:#5A7BAF;}
.note-code .str{color:#6B8F5E;}.note-code .num{color:#B87A4A;}
.note-code .cm{color:rgba(0,0,0,0.25);}
.note-code-copy{position:absolute;top:50%;right:8px;transform:translateY(-50%);background:rgba(0,0,0,0.04);border:1px solid rgba(0,0,0,0.06);border-radius:6px;padding:4px 8px;font-family:'Geist Mono',monospace;font-size:var(--text-sm);color:rgba(0,0,0,0.3);cursor:pointer;transition:opacity 0.15s cubic-bezier(0.32,0.72,0,1);}
.note-code-copy:hover{opacity:0.7;}
.note-code-copy:active{transform:translateY(-50%) scale(0.97);}
.note-callout{background:rgba(139,126,200,0.06);border-left:3px solid #8B7EC8;border-radius:0 8px 8px 0;padding:12px 16px;margin:12px 0;font-size:var(--text-sm);color:rgba(0,0,0,0.5);line-height:1.6;}
.note-embed{width:100%;border-radius:12px;margin:12px 0 4px;overflow:hidden;border:1px solid rgba(0,0,0,0.06);}
.note-embed-placeholder{width:100%;height:280px;background:linear-gradient(145deg,#F5F3EF,#EDEAE6);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;cursor:pointer;transition:opacity 0.2s cubic-bezier(0.32,0.72,0,1);}
.note-embed-placeholder:hover{opacity:0.85;}
.note-embed-label{font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;letter-spacing:0.06em;text-transform:uppercase;color:rgba(0,0,0,0.2);}
.note-embed-btn{font-family:'Geist',sans-serif;font-size:var(--text-sm);font-weight:500;color:#fff;background:#8B7EC8;border:none;border-radius:20px;padding:8px 20px;cursor:pointer;transition:transform 0.15s cubic-bezier(0.32,0.72,0,1),opacity 0.15s cubic-bezier(0.32,0.72,0,1);}
.note-embed-btn:hover{opacity:0.9;}
.note-embed-btn:active{transform:scale(0.97);}
.note-embed iframe{width:100%;height:480px;border:none;display:block;}
.note-embed-caption{font-size:var(--text-sm);color:rgba(0,0,0,0.3);margin:6px 0 12px;font-style:italic;}

/* ═══ MYMIND ═══ */
.mymind-header{padding:0 0 12px;max-width:520px;margin-left:auto;margin-right:auto;}
.mymind-search{
  width:100%;border:none;outline:none;background:none;
  font-family:'Geist',sans-serif;font-size:var(--text-h3);font-weight:300;
  font-style:italic;color:var(--text-primary);letter-spacing:-0.01em;
}
.mymind-search:focus-visible{outline:2px solid var(--accent);outline-offset:2px;}
.mymind-search::placeholder{
  color:rgba(0,0,0,0.2);font-style:italic;
}
.mymind-filters{
  display:flex;gap:8px;padding:0 0 16px;flex-wrap:wrap;
  max-width:520px;margin-left:auto;margin-right:auto;
}
.mymind-pill{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  letter-spacing:0.01em;text-transform:uppercase;
  padding:2px 6px;border-radius:var(--radius-xs);
  background:rgba(0,0,0,0.04);color:rgba(0,0,0,0.45);
  cursor:pointer;transition:background 0.15s cubic-bezier(0.32,0.72,0,1),color 0.15s cubic-bezier(0.32,0.72,0,1);
}
.mymind-pill.active{background:var(--accent);color:white;}
.mymind-pill:hover:not(.active){background:rgba(0,0,0,0.07);}
.mymind-pill:active{transform:scale(0.97);}
.mymind-grid{
  display:flex;gap:8px;
  padding:0;
  max-width:520px;margin-left:auto;margin-right:auto;
}
.mm-col{flex:1;min-width:0;display:flex;flex-direction:column;gap:8px;}
.mm-card{
  border-radius:var(--radius-md);overflow:hidden;cursor:pointer;
  position:relative;
  transition:transform 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);
}
.mm-card:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(0,0,0,0.08),0 2px 6px rgba(0,0,0,0.04);
}
.mm-card:active{
  transform:scale(0.97);
  transition:transform 0.1s cubic-bezier(0.32,0.72,0,1);
}
.mm-card.active{
  box-shadow:
    0 0 0 1.5px var(--accent),
    0 4px 16px rgba(139,126,200,0.12);
  transform:translateY(-1px);
}
.mm-img-card{
  background:#fff;
  border:1px solid rgba(0,0,0,0.04);
  padding:8px;
}
.mm-thumb{width:100%;border-radius:8px;background-size:cover;overflow:hidden;}
.mm-thumb img{width:100%;height:100%;object-fit:cover;display:block;border-radius:8px;}
.mm-caption{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);
  color:rgba(0,0,0,0.62);padding:8px 4px 4px;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
.mm-note-card{
  background:#FFFEF8;padding:12px;
  border:1px solid rgba(0,0,0,0.04);
}
.mm-note-card p{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);
  color:rgba(0,0,0,0.62);line-height:1.5;font-style:italic;
}
.mm-author{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);
  color:rgba(0,0,0,0.48);margin-top:8px;display:block;
}
.mm-link-card{
  background:#fff;padding:12px;
  border:1px solid rgba(0,0,0,0.05);
}
.mm-link-icon{
  font-size:var(--text-sm);margin-bottom:4px;
  width:24px;height:24px;display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,0.03);border-radius:8px;
}
.mm-link-title{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);font-weight:600;
  color:#1A1A1A;margin-bottom:4px;line-height:1.3;
}
.mm-link-desc{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);
  color:rgba(0,0,0,0.55);line-height:1.4;
}
/* Floating popover */
.mm-popover-wrap{
  position:absolute;z-index:1050;
  pointer-events:none;width:52%;min-width:200px;
}
.mm-popover{
  background:#EDEAE6;border-radius:16px;
  box-shadow:
    0 16px 16px rgba(0,0,0,0.12),
    0 4px 12px rgba(0,0,0,0.06);
  padding:16px;
  opacity:0;
  transform:translateY(var(--pop-dir, 6px)) scale(0.96);
  transition:
    opacity 0.15s cubic-bezier(0.32,0.72,0,1),
    transform 0.2s cubic-bezier(0.22,1.1,0.36,1);
}
.mm-popover-wrap.open{pointer-events:auto;}
.mm-popover-wrap.open .mm-popover{
  opacity:1;transform:translateY(0) scale(1);
}
.pop-header{
  display:flex;justify-content:space-between;align-items:flex-start;
  margin-bottom:12px;
}
.pop-title{
  font-family:'Geist',sans-serif;font-size:var(--text-body);font-weight:600;
  color:var(--text-primary);line-height:1.35;flex:1;
}
.pop-close{
  width:28px;height:28px;border-radius:50%;
  background:rgba(0,0,0,0.08);border:none;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:var(--text-sm);line-height:1;color:rgba(0,0,0,0.5);
  transition:background 0.15s cubic-bezier(0.32,0.72,0,1),color 0.15s cubic-bezier(0.32,0.72,0,1);
  flex-shrink:0;margin-left:8px;
  padding:0;
}
.pop-close:hover{background:rgba(0,0,0,0.14);color:rgba(0,0,0,0.7);}
.pop-close:active{transform:scale(0.97);}
.pop-source{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);
  color:var(--accent);text-decoration:none;
  display:inline-flex;align-items:center;gap:4px;
  margin-bottom:12px;transition:opacity 0.15s cubic-bezier(0.32,0.72,0,1);
}
.pop-source:hover{opacity:0.7;}
.pop-source:active{opacity:0.5;}
.pop-tldr{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);
  color:rgba(0,0,0,0.62);line-height:1.6;margin-bottom:12px;
}
.pop-tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:12px;}
.pop-tag{
  padding:2px 6px;border-radius:var(--radius-xs);
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  letter-spacing:0.01em;text-transform:uppercase;
  background:rgba(0,0,0,0.04);color:rgba(0,0,0,0.45);
  border:none;
}
.pop-footer{
  display:flex;align-items:center;justify-content:space-between;
  margin-top:12px;padding-top:10px;
  border-top:1px solid rgba(0,0,0,0.05);
}
.pop-date{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);
  color:rgba(0,0,0,0.48);letter-spacing:0.02em;
}
.pop-copy{
  display:flex;align-items:center;gap:4px;
  font-family:'Geist',sans-serif;font-size:var(--text-sm);font-weight:500;
  color:rgba(0,0,0,0.4);background:none;border:1px solid rgba(0,0,0,0.08);
  border-radius:var(--radius-sm);padding:4px 8px;cursor:pointer;
  transition:color 0.15s cubic-bezier(0.32,0.72,0,1), border-color 0.15s cubic-bezier(0.32,0.72,0,1), background 0.15s cubic-bezier(0.32,0.72,0,1);
}
.pop-copy:hover{color:rgba(0,0,0,0.6);border-color:rgba(0,0,0,0.15);background:rgba(0,0,0,0.03);}
.pop-copy:active{transform:scale(0.97);}
.pop-copy.copied{color:var(--accent);border-color:rgba(139,126,200,0.3);}
/* Scrim */
.mm-scrim{
  position:fixed;inset:0;z-index:1000;
  pointer-events:none;
  background:rgba(58,54,50,0);
  transition:background 0.2s var(--ease);
}
.mm-scrim.open{pointer-events:auto;background:rgba(58,54,50,0.25);}
/* Sheet drag handle — hidden on desktop, shown on mobile */
.sheet-handle{display:none;}

.book-item{padding:12px 0;border-top:1px solid rgba(0,0,0,0.04);}
.book-item h4{font-size:var(--text-body);font-weight:500;color:var(--text-primary);margin-bottom:2px;}
.book-item p{font-size:var(--text-sm);color:var(--text-secondary);}

.connect-box{
  background:rgba(255,255,255,0.3);
  border-radius:16px;padding:32px;
  box-shadow:none;
  border:1px solid rgba(0,0,0,0.06);
}
.connect-box p{font-size:var(--text-body);line-height:1.6;color:var(--text-secondary);margin-bottom:24px;}
.form-field{margin-bottom:16px;}
.form-field label{display:block;font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:700;letter-spacing:0.08em;text-transform:uppercase;color:var(--text-muted);margin-bottom:6px;}
.form-field input,.form-field textarea{
  width:100%;padding:12px 16px;border-radius:12px;
  border:none;font-family:'Geist',sans-serif;font-size:var(--text-body);
  background:rgba(0,0,0,0.04);color:var(--text-primary);
  border:1px solid rgba(0,0,0,0.08);
  box-shadow:none;
  transition:box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);outline:none;resize:vertical;
}
.form-field input:focus,.form-field textarea:focus{
  box-shadow:none;border-color:var(--accent);
}
.form-field input:focus-visible,.form-field textarea:focus-visible{outline:2px solid var(--accent);outline-offset:2px;}
.form-field textarea{min-height:100px;}
.send-btn{
  padding:12px 24px;border:none;border-radius:var(--radius-md);
  background:var(--accent);
  color:white;font-family:'Geist',sans-serif;
  font-size:var(--text-sm);font-weight:700;letter-spacing:0.06em;text-transform:uppercase;
  cursor:pointer;transition:transform 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);
  box-shadow:none;
}
.send-btn:hover{transform:translateY(-1px);box-shadow:0 2px 8px rgba(139,126,200,0.3);}
.social-links{display:flex;gap:16px;margin-top:24px;}
.social-links a{font-size:var(--text-sm);color:var(--accent);text-decoration:none;font-weight:600;letter-spacing:0.02em;transition:opacity 0.2s cubic-bezier(0.32,0.72,0,1);}
.social-links a:hover{opacity:0.7;}
.social-links a:active{opacity:0.5;}

/* ═══ UNIVERSAL PRESS FEEDBACK ═══ */
.mymind-pill:active,
.mm-card:active,
.send-btn:active{
  transform:scale(0.97);
}

/* ═══ REDUCED MOTION ═══ */
@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{
    animation-duration:0.01ms!important;
    animation-iteration-count:1!important;
    transition-duration:0.01ms!important;
  }
  .carousel-scroll{scroll-behavior:auto!important;}
  .modal-card{transition:transform 0s,opacity 0s,box-shadow 0s!important;}
  .mm-popover{transition:opacity 0s,transform 0s!important;}
  .book-pop{transition:opacity 0s,transform 0s!important;}
  .reveal-item{opacity:1!important;filter:none!important;transform:none!important;}
  .tilt-card{transform:none!important;}
  .puzzle-card:hover{transform:none;}
  .puzzle-card:active{transform:none;}
  .puzzle-card:hover .puzzle-img{transform:none;}
  .puzzle-card:hover .puzzle-overlay{transform:translateY(100%);}
}

/* ═══ ROTARY SOUND KNOB ═══ */
.sound-knob-wrap{
  position:relative;
  width:32px;height:32px;
  border-radius:50%;flex-shrink:0;
  /* Recessed well the knob sits in */
  background:
    radial-gradient(circle, #D8D4CE 0%, #E0DDD8 60%, #E4E0DA 100%);
  box-shadow:
    inset 0 2px 6px rgba(0,0,0,0.1),
    inset 0 1px 2px rgba(0,0,0,0.06),
    0 1px 0 rgba(255,255,255,0.6);
  display:flex;align-items:center;justify-content:center;
}
.sound-knob{
  width:24px;height:24px;
  border-radius:50%;
  cursor:pointer;
  position:relative;
  background:
    radial-gradient(ellipse at 40% 30%, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 50%),
    linear-gradient(180deg, #F6F3EF 0%, #EDEAE5 40%, #E6E3DE 100%);
  box-shadow:
    0 2px 4px rgba(0,0,0,0.1),
    0 4px 8px rgba(0,0,0,0.06),
    0 1px 0 rgba(255,255,255,0.4),
    inset 0 1px 0 rgba(255,255,255,0.9),
    inset 0 -1px 2px rgba(0,0,0,0.04);
  transition:transform 0.4s cubic-bezier(0.34,1.56,0.64,1);
  transform:rotate(0deg);
}
.sound-knob:hover{
  box-shadow:
    0 3px 6px rgba(0,0,0,0.12),
    0 5px 10px rgba(0,0,0,0.06),
    0 1px 0 rgba(255,255,255,0.4),
    inset 0 1px 0 rgba(255,255,255,0.95),
    inset 0 -1px 2px rgba(0,0,0,0.04);
}
.sound-knob:active{
  box-shadow:
    0 1px 2px rgba(0,0,0,0.1),
    0 2px 4px rgba(0,0,0,0.05),
    inset 0 1px 0 rgba(255,255,255,0.7),
    inset 0 -1px 2px rgba(0,0,0,0.04);
}
.sound-knob.off{
  transform:rotate(180deg);
}
/* Indicator dot */
.knob-dot{
  position:absolute;
  top:3px;left:50%;
  width:3.5px;height:3.5px;
  margin-left:-1.75px;
  border-radius:50%;
  background:radial-gradient(circle at 35% 35%, #9B8DD6, #6B5CA8);
  box-shadow:
    0 0 4px rgba(107,92,168,0.6),
    0 0 8px rgba(107,92,168,0.3),
    inset 0 1px 1px rgba(255,255,255,0.4);
  transition:opacity 0.3s cubic-bezier(0.32,0.72,0,1), box-shadow 0.3s cubic-bezier(0.32,0.72,0,1);
}
.sound-knob.off .knob-dot{
  background:radial-gradient(circle at 35% 35%, #C8C4BE, #B0ACA6);
  box-shadow:
    inset 0 1px 2px rgba(0,0,0,0.1);
  opacity:0.5;
}
/* ═══ BOTTOM NAV ═══ */
.bottom-nav{
  display:flex;align-items:center;gap:6px;
  position:fixed;bottom:calc(12px + env(safe-area-inset-bottom, 0px));left:20px;right:20px;
  z-index:998;
  padding:4px;border-radius:100px;
  background:#DDD9D3;
  box-shadow:0 4px 12px rgba(0,0,0,0.1),0 1px 3px rgba(0,0,0,0.06);
  border:1px solid rgba(255,255,255,0.3);
  -webkit-backdrop-filter:none;backdrop-filter:none;
}
/* The pill bar holding nav items */
.bottom-nav-pill{
  position:relative;
  display:flex;align-items:center;flex:1;
}
/* Sliding highlight — GPU-composited via transform */
.bottom-nav-highlight{
  position:absolute;top:50%;left:0;
  transform:translateY(-50%);
  height:calc(100% - 4px);border-radius:100px;
  background:linear-gradient(180deg, #F6F3EF 0%, #EDEAE5 40%, #E6E3DE 100%);
  box-shadow:
    0 2px 4px rgba(0,0,0,0.08),
    inset 0 1px 0 rgba(255,255,255,0.9);
  transition:transform 0.3s cubic-bezier(0.32,0.72,0,1),width 0.3s cubic-bezier(0.32,0.72,0,1);
  will-change:transform,width;
  pointer-events:none;
}
.bottom-nav-item{
  position:relative;z-index:1;
  flex:1;text-align:center;
  font-family:'Geist Mono',monospace;font-size:14px;font-weight:500;
  letter-spacing:0.01em;
  padding:4px 16px;border-radius:100px;
  color:rgba(58,54,50,0.5);
  text-decoration:none;cursor:pointer;
  transition:color 0.2s cubic-bezier(0.32,0.72,0,1);
  white-space:nowrap;
}
.bottom-nav-item.active{color:var(--text-primary);}
.bottom-nav-item:active{transform:scale(0.97);}
/* Scroll-to-top chevron — desktop only, adjacent to nav pill */
.nav-scroll-top{
  position:absolute;top:50%;right:0;
  transform:translateY(-50%);
  width:32px;height:32px;border-radius:50%;
  background:#DDD9D3;border:1px solid rgba(255,255,255,0.3);
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  cursor:pointer;
  display:none;align-items:center;justify-content:center;
  color:rgba(58,54,50,0.5);
  opacity:0;pointer-events:none;
  transition:opacity 0.3s cubic-bezier(0.32,0.72,0,1),right 0.3s cubic-bezier(0.32,0.72,0,1),color 0.15s cubic-bezier(0.32,0.72,0,1);
}
.nav-scroll-top.visible{opacity:1;pointer-events:auto;right:-40px;}
.nav-scroll-top:hover{color:var(--accent);}
.nav-scroll-top:active{transform:translateY(-50%) scale(0.93);}
/* Desktop knob — standalone, hidden on mobile */
/* Sound toast — origin-aware, emerges from knob */
.sound-toast{
  position:absolute;bottom:calc(100% + 10px);left:0;
  transform:scale(0.5) translateY(8px);
  transform-origin:0% 100%;
  padding:6px 14px;border-radius:100px;
  background:var(--text-primary);color:var(--bg);
  font-family:'Geist Mono',monospace;font-size:var(--text-xs);font-weight:600;
  letter-spacing:0.02em;
  white-space:nowrap;
  opacity:0;pointer-events:none;
  transition:opacity 0.25s cubic-bezier(0.32,0.72,0,1),transform 0.25s cubic-bezier(0.34,1.56,0.64,1);
  z-index:999;
}
.sound-toast.show{opacity:1;transform:scale(1) translateY(0);}

/* ═══ PAGE CONTENT (V2 flat layout) ═══ */
.page-content{
  width:100%;min-height:100vh;
  padding:40px 0 72px;
  background:var(--bg);
}
.page-inner{max-width:680px;margin:0 auto;}

/* ═══ NOTE CARDS (portfolio page) ═══ */
.note-cards{
  display:flex;flex-direction:column;gap:12px;
  max-width:520px;margin:0 auto;
}
.note-card{
  display:block;text-decoration:none;color:inherit;
  padding:20px;border-radius:var(--radius-md);
  background:rgba(255,255,255,0.4);
  border:1px solid rgba(0,0,0,0.06);
  transition:transform 0.25s cubic-bezier(0.32,0.72,0,1),box-shadow 0.25s cubic-bezier(0.32,0.72,0,1),border-color 0.25s cubic-bezier(0.32,0.72,0,1);
}
.note-card:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 24px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.04);
  border-color:rgba(139,126,200,0.2);
}
.note-card:active{transform:scale(0.97);}
.note-card-date{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  color:var(--text-muted);margin-bottom:6px;letter-spacing:0.02em;
}
.note-card-title{
  font-family:'Geist',sans-serif;font-size:var(--text-body);font-weight:600;
  color:var(--text-primary);margin-bottom:6px;line-height:1.3;
  transition:color 0.2s cubic-bezier(0.32,0.72,0,1);
}
.note-card:hover .note-card-title{color:#8B7EC8;}
.note-card-preview{
  font-size:var(--text-body);color:var(--text-secondary);line-height:1.5;
  margin-bottom:10px;
}
.note-card-tags{display:flex;gap:6px;flex-wrap:wrap;}
.note-card-tag{
  padding:2px 6px;border-radius:4px;
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  letter-spacing:0.01em;text-transform:uppercase;
  background:rgba(0,0,0,0.04);color:rgba(0,0,0,0.45);
  transition:background 0.2s cubic-bezier(0.32,0.72,0,1),color 0.2s cubic-bezier(0.32,0.72,0,1);
}
.note-card:hover .note-card-tag{
  background:rgba(139,126,200,0.08);color:#8B7EC8;
}

/* ═══ BOOKS SECTION ═══ */
.books-shelf{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
  max-width:520px;margin:0 auto;
}
.book-cover-item{
  cursor:pointer;position:relative;
  border-radius:6px;
  transition:transform 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);
}
.book-cover-item:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1);z-index:2;}
.book-cover-item:active{transform:scale(0.97);}
.book-cover-item.active{
  box-shadow:0 0 0 2px var(--accent),0 4px 12px rgba(139,126,200,0.15);
}
.book-cover-img{position:relative;}
.book-cover-img img{
  width:100%;display:block;border-radius:6px;
  aspect-ratio:2/3;object-fit:cover;
}
.book-badge{
  position:absolute;top:4px;right:4px;
  width:20px;height:20px;border-radius:50%;
  background:rgba(255,255,255,0.9);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 1px 3px rgba(0,0,0,0.12);
  transition:transform 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1);
}
.book-badge svg{transition:transform 0.2s cubic-bezier(0.32,0.72,0,1);}
.book-cover-item:hover .book-badge{
  transform:scale(1.15);
  box-shadow:0 2px 6px rgba(0,0,0,0.18);
}
.book-cover-item:hover .book-badge svg{transform:rotate(15deg) scale(1.1);}
.book-badge.fav{border:1.5px solid rgba(192,57,43,0.2);}
.book-badge.done{border:1.5px solid rgba(139,126,200,0.2);}
.book-badge[data-tip]::before{
  content:'';position:absolute;top:calc(100% + 0px);left:50%;
  transform:translateX(-50%);
  border:4px solid transparent;
  border-bottom-color:var(--text-primary);
  opacity:0;pointer-events:none;
  transition:opacity 0.2s cubic-bezier(0.32,0.72,0,1);
}
.book-badge[data-tip]::after{
  content:attr(data-tip);
  position:absolute;top:calc(100% + 8px);left:50%;
  transform:translateX(-50%) translateY(-4px);
  padding:6px 12px;border-radius:8px;
  background:var(--text-primary);color:var(--bg);
  font-family:'Geist Mono',monospace;font-size:var(--text-xs);font-weight:600;
  letter-spacing:0.02em;
  white-space:nowrap;
  opacity:0;pointer-events:none;
  transition:opacity 0.2s cubic-bezier(0.32,0.72,0,1),transform 0.2s cubic-bezier(0.32,0.72,0,1);
}
.book-badge[data-tip]:hover::before{opacity:1;}
.book-badge[data-tip]:hover::after{opacity:1;transform:translateX(-50%) translateY(0);}
/* Book filters */
.book-filters{
  display:flex;gap:8px;padding:0 0 16px;flex-wrap:wrap;
  max-width:520px;margin:0 auto;
}
/* Book popover wrap */
.book-pop-wrap{
  position:fixed;z-index:1050;
  pointer-events:none;
}
.book-pop{
  background:#EDEAE6;border-radius:16px;
  box-shadow:
    0 16px 16px rgba(0,0,0,0.12),
    0 4px 12px rgba(0,0,0,0.06);
  padding:16px;
  opacity:0;
  transform:translateY(var(--pop-dir, 8px)) scale(0.97);
  transition:
    opacity 0.2s cubic-bezier(0.32,0.72,0,1),
    transform 0.25s cubic-bezier(0.32,0.72,0,1);
}
.book-pop-wrap.open{pointer-events:auto;}
.book-pop-wrap.open .book-pop{
  opacity:1;transform:translateY(0) scale(1);
}
.book-pop-meta{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);
  color:var(--text-secondary);margin-bottom:12px;
  display:flex;align-items:center;gap:8px;
}
.book-pop-rating{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;text-transform:uppercase;
  padding:4px 10px;border-radius:var(--radius-sm);
}
.book-pop-rating.excellent{background:rgba(192,57,43,0.1);color:#C0392B;border:1px solid rgba(192,57,43,0.15);}
.book-pop-rating.great{background:rgba(139,126,200,0.12);color:#8B7EC8;border:1px solid rgba(139,126,200,0.15);}
.book-pop-progress{
  display:flex;align-items:center;gap:8px;margin-bottom:12px;
}
.book-pop-progress-bar{
  flex:1;height:4px;border-radius:2px;
  background:rgba(0,0,0,0.06);overflow:hidden;
}
.book-pop-progress-fill{
  height:100%;border-radius:2px;
  background:#8B7EC8;
  transform-origin:left;
  transition:transform 0.3s cubic-bezier(0.32,0.72,0,1);
}
.book-pop-pct{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);
  color:var(--text-muted);flex-shrink:0;
}
.book-pop-highlights{
  max-height:180px;overflow-y:auto;
  border-top:1px solid rgba(0,0,0,0.05);
  padding-top:10px;margin-top:4px;
}
.book-pop-highlight{
  font-family:'Geist',sans-serif;font-size:var(--text-sm);line-height:1.55;
  color:var(--text-secondary);
  padding:8px 0;
  border-bottom:1px solid rgba(0,0,0,0.04);
  margin-bottom:0;
}
.book-pop-highlight:last-child{border-bottom:none;padding-bottom:0;}
.book-pop-highlight mark{
  background:rgba(139,126,200,0.15);
  color:var(--text-primary);
  border-radius:2px;padding:1px 2px;
}
.book-detail{
  max-width:520px;margin:0 auto;
  clip-path:inset(0 0 100% 0);opacity:0;
  transition:clip-path 0.3s cubic-bezier(0.32,0.72,0,1),opacity 0.25s cubic-bezier(0.32,0.72,0,1);
}
.book-detail.open{
  clip-path:inset(0);opacity:1;margin-top:20px;
  padding:20px;border-radius:12px;
  background:rgba(255,255,255,0.4);
  border:1px solid rgba(0,0,0,0.06);
}
.book-detail-header{display:flex;gap:16px;margin-bottom:16px;}
.book-detail-cover{width:80px;flex-shrink:0;}
.book-detail-cover img{width:100%;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
.book-detail-meta{flex:1;min-width:0;}
.book-detail-title{
  font-family:'Geist',sans-serif;font-size:var(--text-body);font-weight:600;
  color:var(--text-primary);margin-bottom:4px;line-height:1.3;
}
.book-detail-author{
  font-size:var(--text-sm);color:var(--text-secondary);margin-bottom:8px;
}
.book-detail-badge{
  display:inline-block;padding:2px 8px;border-radius:4px;
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;text-transform:uppercase;
  margin-bottom:8px;
}
.book-detail-badge.fav{background:rgba(192,57,43,0.08);color:#C0392B;}
.book-detail-badge.done{background:rgba(139,126,200,0.08);color:#8B7EC8;}
.book-detail-progress{display:flex;align-items:center;gap:8px;}
.book-detail-progress-bar{
  flex:1;height:4px;border-radius:2px;
  background:rgba(0,0,0,0.06);overflow:hidden;
}
.book-detail-progress-fill{
  height:100%;border-radius:2px;
  background:var(--accent);
  transform-origin:left;
  transition:transform 0.3s cubic-bezier(0.32,0.72,0,1);
}
.book-detail-progress-pct{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);
  color:var(--text-muted);flex-shrink:0;
}
.book-highlights-title{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.06em;text-transform:uppercase;
  color:var(--text-muted);margin-bottom:12px;
}
.book-highlight{
  padding:12px 0;border-top:1px solid rgba(0,0,0,0.04);
}
.book-highlight:first-child{border-top:none;}
.book-highlight-note{
  font-size:var(--text-body);color:var(--text-secondary);line-height:1.65;
  font-style:italic;
}

/* ═══ SHOW MORE — books & mymind (mirrors .puzzle-extra pattern) ═══ */
.book-extra{display:none;opacity:0;transform:translateY(12px);}
.books-shelf.expanded .book-extra{display:block;animation:puzzleReveal 0.3s cubic-bezier(0.32,0.72,0,1) forwards;}
.mm-extra{display:none;}
.mymind-grid.expanded .mm-extra{display:block;opacity:0;transform:translateY(12px);}

/* ═══ NOTE PAGE (individual /notes/[slug]) ═══ */
.note-page{
  min-height:100vh;padding:40px 24px 80px;
  background:var(--bg);
}
.note-page-inner{max-width:600px;margin:0 auto;}
.note-page-back{
  display:inline-flex;align-items:center;gap:4px;
  font-family:'Geist',sans-serif;font-size:var(--text-sm);font-weight:500;
  color:var(--accent);text-decoration:none;
  background:none;border:none;padding:0;cursor:pointer;
  margin-bottom:32px;
  transition:opacity 0.15s cubic-bezier(0.32,0.72,0,1);
}
.note-page-back:hover{opacity:0.7;}
.note-page-back:active{opacity:0.5;}
.note-page-date{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:500;
  color:var(--text-muted);margin-bottom:8px;letter-spacing:0.02em;
}
.note-page-tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px;}
.note-page-tag{
  padding:4px 10px;border-radius:8px;
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;text-transform:uppercase;
  background:rgba(0,0,0,0.04);color:rgba(0,0,0,0.35);
  border:1px solid rgba(0,0,0,0.06);
}
.note-page-title{
  font-family:'GeistPixel',sans-serif;font-size:var(--text-h2);font-weight:400;
  letter-spacing:-0.02em;color:var(--text-primary);
  margin-bottom:32px;line-height:1.2;
}
.note-page-body{
  font-size:var(--text-body);color:rgba(0,0,0,0.55);line-height:1.75;
}
.note-page-body p{margin-bottom:16px;}
.note-page-footer{
  margin-top:40px;padding-top:20px;
  border-top:1px solid rgba(0,0,0,0.06);
}
.note-page-share{
  display:inline-flex;align-items:center;gap:4px;
  font-family:'Geist',sans-serif;font-size:var(--text-sm);font-weight:500;
  color:var(--text-secondary);
  background:none;border:1px solid rgba(0,0,0,0.08);
  border-radius:8px;padding:8px 14px;cursor:pointer;
  transition:background 0.15s cubic-bezier(0.32,0.72,0,1),color 0.15s cubic-bezier(0.32,0.72,0,1);
}
.note-page-share:hover{background:rgba(0,0,0,0.04);color:var(--text-primary);}
.note-page-share:active{transform:scale(0.97);}

/* Up Next (shared between reader & standalone page) */
.note-upnext,.note-page-upnext{margin-top:40px;padding-top:24px;border-top:1px solid rgba(0,0,0,0.06);}
.note-upnext-label,.note-page-upnext-label{
  font-family:'Geist Mono',monospace;font-size:var(--text-sm);font-weight:600;
  letter-spacing:0.04em;text-transform:uppercase;
  color:var(--text-muted);margin-bottom:12px;
}
.note-upnext-card{
  cursor:pointer;padding:16px;border-radius:var(--radius-md);
  background:rgba(255,255,255,0.4);border:1px solid rgba(0,0,0,0.06);
  transition:transform 0.2s cubic-bezier(0.32,0.72,0,1),box-shadow 0.2s cubic-bezier(0.32,0.72,0,1),border-color 0.2s cubic-bezier(0.32,0.72,0,1);
}
.note-upnext-card:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(0,0,0,0.06),0 2px 6px rgba(0,0,0,0.04);
  border-color:rgba(139,126,200,0.2);
}
.note-upnext-card:active{transform:scale(0.97);}
.note-page-upnext .note-card{margin-top:0;}

/* ═══ RESPONSIVE ═══ */
/* ═══ MOBILE (≤480px) ═══ */
@media(max-width:480px){
  /* Modal — full-screen stacked (Marijana pattern) */
  .modal-overlay{align-items:stretch;justify-content:stretch;}
  .modal-backdrop{background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);}
  .modal-card{
    width:100%;max-height:100dvh;
    border-radius:0;
    opacity:0;transform:scale(0.97);
    transition:opacity 0.25s cubic-bezier(0.32,0.72,0,1),transform 0.25s cubic-bezier(0.32,0.72,0,1);
  }
  .modal-overlay.open .modal-card{opacity:1;transform:scale(1);}
  .modal-card .sheet-handle{display:none;}
  .modal-card-inner{
    height:100dvh;max-height:100dvh;
    border-radius:0;
    padding-bottom:env(safe-area-inset-bottom, 0px);
  }
  .modal-carousel{aspect-ratio:unset;height:90vw;flex:0 0 auto;}
  .carousel-scroll{scroll-snap-type:x mandatory;}
  .carousel-slide{min-width:100vw;width:100vw;scroll-snap-align:center;}
  .carousel-slide img,.carousel-slide video{object-position:center center;}
  .carousel-btn{width:48px;height:48px;font-size:var(--text-body);}
  .modal-body{padding:20px 20px 32px;flex:1;overflow-y:auto;}
  .modal-desc-wrap{max-height:none;}
  .modal-desc{font-size:14px;line-height:1.6;}
  .modal-title{font-size:var(--text-h4);}
  .modal-close{top:8px;right:8px;width:48px;height:48px;font-size:var(--text-body);opacity:1;}

  /* Browse content — reduce top space, smoother scrolling on mobile */
  .browse-content{padding-top:52px;}

  /* Strip specular highlights from puzzle cards on mobile */
  .puzzle-card::after{display:none;}
  .browse-section{padding:36px 20px;}
  .browse-section h2{font-size:var(--text-h3);}

  /* Puzzle grid — 2 col */
  .puzzle-grid{
    grid-template-columns:1fr 1fr;
    grid-auto-rows:140px;
    gap:10px;
  }

  /* Mymind — handled by JS column count */
  .mymind-search{font-size:var(--text-h4);}

  /* Popover — smaller on mobile */
  .popover{width:180px;}

  /* Books — 3 columns on mobile */
  .books-shelf{grid-template-columns:repeat(3,1fr);gap:10px;}
  .book-detail-cover{width:60px;}

  /* ═══ BOTTOM SHEET — popovers become full-width sheets on mobile ═══ */
  .sheet-handle{
    display:block;width:36px;height:4px;border-radius:2px;
    background:rgba(0,0,0,0.15);
    margin:10px auto 0;flex-shrink:0;
  }
  /* Book popover → full-screen modal */
  .book-pop-wrap{
    position:fixed!important;inset:0!important;width:100%!important;
    background:rgba(0,0,0,0.5);
    backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
    opacity:0;transform:scale(0.97);
    transition:opacity 0.25s cubic-bezier(0.32,0.72,0,1),transform 0.25s cubic-bezier(0.32,0.72,0,1);
  }
  .book-pop-wrap.open{opacity:1;transform:scale(1);}
  .book-pop{
    width:100%;height:100dvh;
    box-shadow:none;border-radius:0;
    max-height:none;overflow-y:auto;
    padding:20px;
    padding-bottom:calc(20px + env(safe-area-inset-bottom, 0px));
    background:#fff;
  }
  .book-pop-wrap.open .book-pop{transform:none;}
  .book-pop-highlights{max-height:none;}
  .book-pop-highlight{font-size:14px;line-height:1.6;}
  /* Mymind popover → full-screen modal */
  .mm-popover-wrap{
    position:fixed!important;inset:0!important;width:100%!important;min-width:0!important;
    background:rgba(0,0,0,0.5);
    backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
    opacity:0;transform:scale(0.97);
    transition:opacity 0.25s cubic-bezier(0.32,0.72,0,1),transform 0.25s cubic-bezier(0.32,0.72,0,1);
  }
  .mm-popover-wrap.open{opacity:1;transform:scale(1);}
  .mm-popover{
    width:100%;height:100dvh;
    box-shadow:none;border-radius:0;
    max-height:none;overflow-y:auto;
    padding:20px;
    padding-bottom:calc(20px + env(safe-area-inset-bottom, 0px));
    background:#fff;
  }
  .mm-popover-wrap.open .mm-popover{transform:none;}
  .pop-tldr{font-size:14px;line-height:1.6;}
  /* Scrim — visible dark backdrop on mobile */
  .mm-scrim.open{
    background:rgba(0,0,0,0.3);
    transition:background 0.25s cubic-bezier(0.32,0.72,0,1);
  }

  /* Note page — tighter on mobile */
  .note-page{padding:32px 20px 60px;}
  .note-page-title{font-size:var(--text-h3);}

  /* About — stack cards tighter on mobile */
  .stack-card{padding:6px 8px;margin-left:-22px;}
  .stack-card:first-child{margin-left:0;}
  .about-cta-row{flex-direction:column;}
  .about-cta{text-align:center;}

  /* ═══ TOUCH TARGETS — 48px minimum per WCAG ═══ */
  .pop-close{width:36px;height:36px;font-size:var(--text-h4);}
  .mymind-pill{min-height:48px;display:inline-flex;align-items:center;padding:2px 12px;}
  .puzzle-show-more{min-height:48px;}
  .about-cta{min-width:48px;min-height:48px;display:inline-flex;align-items:center;justify-content:center;}
  .about-cta-primary{min-height:48px;display:inline-flex;align-items:center;}
}

/* ═══ TABLET (481–768px) ═══ */
@media(min-width:481px) and (max-width:768px){
  .modal-card{width:min(640px,95vw);}
  /* ═══ BOTTOM NAV — tablet overrides ═══ */
  .bottom-nav{
    bottom:12px;
    padding-bottom:env(safe-area-inset-bottom);
  }
  .page-content{padding-bottom:72px;}
  .site-footer{margin-bottom:48px;}
}

/* ═══ DESKTOP ═══ */
@media(min-width:769px){
  /* Center nav, auto width instead of edge-to-edge */
  .bottom-nav{
    left:50%;right:auto;transform:translateX(-50%);
    bottom:16px;
  }
  /* Knob slightly larger on desktop nav */
  .sound-knob-wrap{width:34px;height:34px;}
  .sound-knob{width:26px;height:26px;}
  .knob-dot{width:4px;height:4px;margin-left:-2px;top:4px;}
  .nav-scroll-top{display:flex;}
  .bottom-nav-item{flex:none;padding:8px 12px;}
}
